{% extends 'WebProfilerBundle:Profiler:layout.html.twig' %}

{% block toolbar %}
    {% set icon %}
        <span class="icon">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAcCAQAAADCOPeRAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQffCRAKDw9oBbU8AAAAyUlEQVQoz+XQsUoDQRQF0DO7UyQ2Fm4wBC1FUFBR0f//ASshCJYbQxQVCRjUzKxFgpBs8AP03uY0Dx6Xv5EbjSTLGnnZhZLGbdD8fh9lMxnB1kaZOrOjcqRu6dhLlD16RpA8tZSjQmUmqJQq7yvqKYJkbI5S36SlAVMXdvWdqF2u6XTxw9gESdqgHAVdUaEr6Kwo6ApBcucL0YH7lg6ZujKw59zIdUuvUTLygA9z9Zo+zaNyuUNvgyplMLRvJihse5P5UaNj4n/kG+KnZsX5x+f1AAAAAElFTkSuQmCC" />
        </span>
        <span class="sf-toolbar-status {% if collector.tables|length > 0 %} sf-toolbar-status-green {% endif %}">{{ collector.tables|length }}</span>
    {% endset %}

    {% if collector.tables|length > 0 %}
        {% set text %}
            {% for table in collector.tables %}
                <div class="sf-toolbar-info-piece">
                    <b>{{ table.name }}</b>
                    <span>{{ table.total }}</span>
                </div>
            {% endfor %}
        {% endset %}
    {% endif %}

    {{ include('@WebProfiler/Profiler/toolbar_item.html.twig', { 'link': true }) }}
{% endblock %}

{% block menu %}
    <span class="label">
        <span class="icon">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAWCAQAAABwdJQDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAFdSURBVDjLndS/alRBHMXxz94dsmbXFIKQwv/vIBaCWkjAJ0hhY2XhI6yCYGFQEMEHiFXQUoxPoDZ2vkNEsQhsRFe9N3vvWOzkMjdp4s5UP75wzsyZw/BCpRaPsWv7Nnui/1oBjaadC4VZh3dpbyGH97YVGoXGLWsemiY6sOGDtx0qepwJjEUhm6MnXRowMhDMBDMrWLWrh2jlED05P9JfpRIl/mCiTIr7R2nAWZf11fpqF3DVXnIY4kyXLpTStpetxm3r7viRHJa99s5mh4o2MoEHoqVOSk+z6f48paGlNochTttViCmlnI4OUqpUqFJKe6qkODlKA8670mpcwjWTdIcRzmX04oIpbXmurxbM3HPXzczho1ee5TTgq8+twBd88rutM98yujN3OJG1ZRmn1FmXDtEgmmZt+Ynv6qRY4leHxqDnhnH7lmt4ZJocBrhurNAk2mPrWB/AwX7zDwcivKCm+Z3ZAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTAyLTE0VDAxOjU3OjI2LTA2OjAwignJAgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNS0wMi0xNFQwMTo1NzoyNi0wNjowMPtUcb4AAABjdEVYdHN2Zzpjb21tZW50ACBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE1LjAuMiwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIIctufUAAAAASUVORK5CYII=" />
        </span>
        <strong>Tables</strong>
        {% if collector.tables|length > 0 %}
            <span class="count"><span>{{ collector.tables|length }}</span></span>
        {% endif %}
    </span>
{% endblock %}

{% block panel %}
    {% if collector.tables|length > 0 %}
        <span class="label">
            <strong>Tables</strong>
        </span>
        {% for tableId, table in collector.tables %}
            <table style="margin-bottom: 30px">
                <tr><td colspan="2"><strong>{{ table.name }}</strong> <em>{{ table.caption }}</em></td></tr>
                <tr><td>Caption</td><td>{{ table.caption }}</td></tr>
                <tr><td>Options</td><td>{{ table.options|json_encode() }}</td></tr>
                <tr><td>Query</td><td>{{ table.query|json_encode() }}</td></tr>
                <tr><td>Nb rows</td><td>{{ table.total }}</td></tr>
                <tr>
                    <td>Columns</td>
                    <td>
                        <ul>
                            {% for name, column in table.columns %}
                                <li>
                                    <span style="display: inline-block; width: 130px">{{ name }} <span>[ {{column.type}} ]</span></span>
                                    <span style="display: inline-block; width: 100px">{{ column.params|join(',') }}</span>
                                    <span>{{ column.class }}</span>
                                </li>
                            {% endfor %}
                        </ul>
                    </td>
                </tr>
            </table>
        {% endfor %}
    {% else %}
        <p><em>No tables were created for this request</em></p>
    {% endif %}
{% endblock %}